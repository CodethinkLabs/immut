{
    "variables": {
        "ssh_name": "kappataumu",
        "ssh_pass": "kappataumu",
        "hostname": "packer-test"
    },

    "builders": [{
        "boot_command": [
            "<tab> linux text biosdevname=0 ks=http://{{ .HTTPIP }}:{{ .HTTPPort}}/ks-fedora-atomic-24.cfg<enter><enter>"
        ],
        "type": "virtualbox-iso",
        "guest_os_type": "Fedora_64",

        "vboxmanage": [
            ["modifyvm", "{{.Name}}", "--vram", "32"]
        ],

        "disk_size" : 10000,

        "iso_url": "http://mirror.datacenter.by/pub/fedoraproject.org/alt/atomic/stable/Atomic/x86_64/iso/Fedora-Atomic-dvd-x86_64-24-20160820.0.iso",
        "iso_checksum": "9adbbde1a888545bf785f802ad07986ab841a32c01c37b1d5ca4b638d8dfb248",
        "iso_checksum_type": "sha256",

        "http_directory" : "files",
        "http_port_min" : 9001,
        "http_port_max" : 9001,

        "ssh_username": "root",
        "ssh_password": "atomic",
        "ssh_wait_timeout": "20m",

        "shutdown_command": "echo {{user `ssh_pass`}} | sudo -S shutdown -P now"

    }],

    "provisioners": [{
      "type": "file",
      "source": "files/atomic-tree-builder",
      "destination": "/home/atomic-tree-builder"
    }, {
      "type": "shell",
      "inline": ["docker build --rm -t /home/atomic-tree-builder",
          "docker run --privileged -d -p 8000:8000 --name atomicrepo /home/atomic-tree-builder"]
    }]
}
